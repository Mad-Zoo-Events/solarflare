<!doctype html>
<html>

{{template "headerControlpanel"}}

<body onkeypress='handleKeypress(event);' onkeydown='handleKeydown(event);'>
    <div id="loading-overlay" class="loading-overlay">
        <div>LOADING</div>
    </div>
    <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>

    <div class="header">
        <div id="header-bossbar-control">{{template "bossbarForm" .}}</div>
        <div id="header-command-control">{{template "commandForm" .}}</div>
        <div id="header-stageselect-control">{{template "stageSelector" .}}</div>
        <div id="header-serverselect-control" onclick='toggleServerManagerPopup();'>{{template "serverManager" .}}</div>
        <div id="header-presetmanager-control" onclick='navigate(CP_PRESETS_ENDPOINT);'>{{template "presetManager" .}}
        </div>
        <div id="header-caps-control">
            <div id="caps-warning">YOU GOT CAPS LOCK ON!!</div>
        </div>
    </div>
    <div class="main-controls-holder">
        <div class="controls-holder particle-controls">
            <div class="controls-holder-header cyan">
                <i class="stop-type-button fas fa-stop-circle fa-2x" title="Stop Effects + Detach Clocks"
                    onclick='doStopAll(undefined, true, true, "particle")'></i>
                <i class="stop-type-button far fa-stop-circle fa-2x" title="Stop Effects"
                    onclick='doStopAll(undefined, true, false, "particle")'></i>
                <i class="stop-type-button fas fa-stopwatch fa-2x" title="Detach Clocks"
                    onclick='doStopAll(undefined, false, true, "particle")'></i>
                <span>PTCL</span>
            </div>
            {{range .ParticleEffectPresets}}
            {{template "particleEffectControl" .}}
            {{end}}
        </div>
        <div class="controls-holder dragon-controls">
            <div class="controls-holder-header magenta">
                <i class="stop-type-button fas fa-stop-circle fa-2x" title="Stop Effects + Detach Clocks"
                    onclick='doStopAll(undefined, true, true, "dragon")'></i>
                <i class="stop-type-button far fa-stop-circle fa-2x" title="Stop Effects"
                    onclick='doStopAll(undefined, true, false, "dragon")'></i>
                <i class="stop-type-button fas fa-stopwatch fa-2x" title="Detach Clocks"
                    onclick='doStopAll(undefined, false, true, "dragon")'></i>
                <span>DRGN</span>
            </div>
            {{range .DragonEffectPresets}}
            {{template "dragonControl" .}}
            {{end}}
        </div>
        <div class="controls-holder laser-controls">
            <div class="controls-holder-header indigo">
                <i class="stop-type-button fas fa-stop-circle fa-2x" title="Stop Effects + Detach Clocks"
                    onclick='doStopAll(undefined, true, true, "laser")'></i>
                <i class="stop-type-button far fa-stop-circle fa-2x" title="Stop Effects"
                    onclick='doStopAll(undefined, true, false, "laser")'></i>
                <i class="stop-type-button fas fa-stopwatch fa-2x" title="Detach Clocks"
                    onclick='doStopAll(undefined, false, true, "laser")'></i>
                <span>LSR</span>
            </div>
            {{range .LaserEffectPresets}}
            {{template "laserControl" .}}
            {{end}}
        </div>
        <div class="controls-holder timeshift-controls">
            <div class="controls-holder-header orange">
                <i class="stop-type-button fas fa-stop-circle fa-2x" title="Stop Effects + Detach Clocks"
                    onclick='doStopAll(undefined, true, true, "timeshift")'></i>
                <i class="stop-type-button far fa-stop-circle fa-2x" title="Stop Effects"
                    onclick='doStopAll(undefined, true, false, "timeshift")'></i>
                <i class="stop-type-button fas fa-stopwatch fa-2x" title="Detach Clocks"
                    onclick='doStopAll(undefined, false, true, "timeshift")'></i>
                <span>TSHFT</span>
            </div>
            {{range .TimeshiftEffectPresets}}
            {{template "timeshiftControl" .}}
            {{end}}
        </div>
        <div class="controls-holder potion-controls">
            <div class="controls-holder-header green">
                <i class="stop-type-button fas fa-stop-circle fa-2x" title="Stop Effects + Detach Clocks"
                    onclick='doStopAll(undefined, true, true, "potion")'></i>
                <i class="stop-type-button far fa-stop-circle fa-2x" title="Stop Effects"
                    onclick='doStopAll(undefined, true, false, "potion")'></i>
                <i class="stop-type-button fas fa-stopwatch fa-2x" title="Detach Clocks"
                    onclick='doStopAll(undefined, false, true, "potion")'></i>
                <span>PTN</span>
            </div>
            {{range .PotionEffectPresets}}
            {{template "potionControl" .}}
            {{end}}
        </div>
        <div class="controls-holder command-controls">
            <div class="controls-holder-header steel">
                <i class="stop-type-button fas fa-stopwatch fa-2x" title="Detach Clocks"
                    onclick='doStopAll(undefined, false, true, "command")'></i>
                <span>CMD</span>
            </div>
            {{range .CommandEffectPresets}}
            {{template "commandControl" .}}
            {{end}}
        </div>
    </div>
    <div class="footer">
        <div class="log-pane">
            <i class="clear-logs-button fas fa-eraser fa-2x" onclick='clearLogs();'></i>
            <div id="log-window"></div>
        </div>
        <div id="clock-holder">
            <h3 id="clock-title">Clock</h3>
            <div id="clock-indicator"></div>
            <input id="clock-bpm-input" type="number" min="40" max="200" step="0.1" value="128"
                onfocus='suppressHotkeys=true' onblur='suppressHotkeys=false'
                oninput='ClockBPMRangeInput.value = this.value;' onchange='changeClockSpeed();' />
            <input id="clock-bpm-range-input" type="range" min="40" max="200" step="0.1" value="128"
                oninput='ClockBPMInput.value = this.value;' onchange='changeClockSpeed();' />
            <select id="clock-note-length-input" onchange='changeClockSpeed();'>
                <option value="32">8/1</option>
                <option value="16">4/1</option>
                <option value="8">2/1</option>
                <option value="4">1/1</option>
                <option value="2">1/2</option>
                <option value="1.3333333333333333">1/2 T</option>
                <option value="1" selected>1/4</option>
                <option value="0.6666666666666666">1/4 T</option>
                <option value="0.5">1/8</option>
                <option value="0.3333333333333333">1/8 T</option>
                <option value="0.25">1/16</option>
                <option value="0.125">1/32</option>
            </select>
            <button id="clock-tap-button" class="cyan" onclick='clockTap();'>►&nbsp;+&nbsp;◄<br />TAP</button>
            <button id="clock-restart-button" class="cyan" onclick='restartClock();'>Restart</button>
        </div>
        <div id="status-window">
            <h3>Status</h3>
            <table>
                <tr>
                    <td>
                        <span>Status:</span>
                    </td>
                    <td>
                        <span class="orange" id="status-connection-status">Disconnected</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Servers Listening: </span>
                    </td>
                    <td>
                        <span id="status-server-count">{{.ActiveServerCount}}</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Last Effect Latency: </span>
                    </td>
                    <td>
                        <span id="status-last-request-time">-</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Average Latency: </span>
                    </td>
                    <td>
                        <span id="status-average-request-time">-</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Application Version: </span>
                    </td>
                    <td>
                        <span>{{.AppVersion}}</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Receive UI Feedback: </span>
                    </td>
                    <td>
                        <span><input id="ui-update-checkbox" type="checkbox" onchange='toggleUIUpdates(this)' /></span>
                    </td>
                </tr>
            </table>
        </div>
        <div class="main-controls">
            <button id="stop-everything-button" class="stop-all-button" type="button"
                onclick='doStopAll(this, true, true);'>►&nbsp;0&nbsp;◄<br />stop&nbsp;everything</button>
            <button id="stop-all-effects-button" class="stop-all-button" type="button"
                onclick='doStopAll(this, true, false);'>►&nbsp;-&nbsp;◄<br />stop&nbsp;effects</button>
            <button id="detach-all-button" class="stop-all-button" type="button"
                onclick='doStopAll(this, false, true);'>►&nbsp;ESC&nbsp;◄<br />remove&nbsp;clocks</button>
        </div>
    </div>
</body>

</html>
