<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Mad Zoo Events Visual Control System</title>
    <link rel="shortcut icon" href="/static/favicon.ico">
    <link rel="icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/css/main.css">
    <script type="text/javascript" src="/static/js/httpClient.js"></script>
    <script type="text/javascript" src="/static/js/uiManager.js"></script>
</head>

<bod>
    <div class="preset-edit-main">
        <h1>{{if .ID}} Edit {{else}} Create New {{end}} <span class="cyan">{{.DisplayName}} </span> Particle Effect
            Preset</h1>
        <form class="preset-form" id="particle-preset-form" method="POST" action="/presets/particle-ui">
            <input name="id" type="hidden" value="{{.ID}}" />

            <label>Display Name</label>
            <input name="displayName" type="text" size="10" placeholder="Preset display name"
                value="{{.DisplayName}}" />
            <br />

            <label>Description</label>
            <input name="description" type="text" size="50" placeholder="Short description" value="{{.Description}}" />
            <br />

            <label>Keyboard Shortcut</label>
            <input type="text" maxlength="1" size="50" value="{{.UIKeyBinding}}"
                onkeypress='setKeyBinding(event, this);' onchange='checkKeyBinding(this)' />
            <input id="key-binding" name="keyBinding" type="hidden" value="{{.KeyBinding}}" />
            <br />

            <label>Effects</label>
            {{range $index, $element := .ParticleEffects}}
            <div class="effect-box">
                <span class="armor-stand">
                    <span class="delete-effect" onclick='removeEffectInput(this);'>ðŸ—‘</span>
                </span>
                <label>Minecraft Particle Name</label>
                <select class="indexed-input" name="effect[{{$index}}].name">
                    {{$current := .Name}}
                    {{range $.UIAllowedParticleEffects}}
                    <option value="{{.}}" {{if eq $current .}}selected{{end}}>{{.}}</option>
                    {{end}}
                </select>
                <br />

                <label>Display Region Type</label>
                <select class="indexed-input" name="effect[{{$index}}].regionType">
                    {{$current := .UIRegionRegionType}}
                    {{range $.UIAllowedRegionTypes}}
                    <option value="{{.Name}}" {{if eq $current .Name}}selected{{end}}>{{.Name}}</option>
                    <option class="option-description" disabled>&nbsp;&nbsp;â””â”€ {{.Description}}</option>
                    {{end}}
                </select>
                <br />

                <label>Comma-separated list of point IDs</label>
                <input class="indexed-input" name="effect[{{$index}}].pointIds" type="text" placeholder="0,1,2"
                    value="{{.UIRegionPointIDs}}" />
                <br />

                <label>Randomize particles in the cuboid</label>
                <input class="indexed-input" name="effect[{{$index}}].randomize" type="checkbox"
                    {{if .UIRegionRandomize}}checked{{end}} />
                <br />

                <label>Particle density in the cuboid</label>
                <input class="indexed-input" name="effect[{{$index}}].density" type="range" max="100" min="1" step="1"
                    value="{{.UIRegionDensity}}" />
                <br />

                <label>Shape equation</label>
                <input class="indexed-input" name="effect[{{$index}}].equation" type="text"
                    placeholder="1-abs(x+y)-abs(y-x)" value="{{.UIRegionEquation}}" />

                <hr />
            </div>
            {{end}}
        </form>
        <div class="add-effect" onclick='addEffectInput("particle-preset-form");'>+</div>
    </div>

    <div class="footer">
        <div></div>
        <button class="cyan" type="button"
            onclick='document.getElementById("particle-preset-form").submit();'>Save</button>
        <div class="master-controls">
            <button class="darker-cyan" type="button" onclick='navigate(CP_PRESETS_ENDPOINT);'>Cancel</button>
        </div>
    </div>
</bod>

</html>