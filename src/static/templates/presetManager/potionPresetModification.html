<!doctype html>
<html>

{{template "headerPresetmanager"}}

<body>
    <div class="preset-edit-main">
        <h1>{{if .ID}} Edit {{else}} Create New {{end}} <span class="green">{{.DisplayName}} </span> Potion Preset
        </h1>
        <form id="preset-form" method="POST" action="/presets/potion-ui">
            {{template "sharedPresetModificationInputs" .}}

            <label>Effects</label>
            {{range $index, $element := .PotionEffects}}
            <div class="effect-box" data-index="{{$index}}">
                <span class="armor-stand">
                    <i class="delete-effect far fa-trash-alt fa-lg" onclick='removeEffectInput(this);'></i>
                </span>

                <label>Type</label>
                <select class="indexed-input" name="effect[{{$index}}].type">
                    {{$current := .Type}}
                    {{range $.UIAllowedPotionEffects}}
                    <option value="{{.Name}}" {{if eq $current .Name}}selected{{end}}>{{.Name}}</option>
                    <option class="option-description" disabled>&nbsp;&nbsp;└─ {{.Description}}</option>
                    {{end}}
                </select>
                <br />

                <label>Amplifier</label>
                <div class="input-range-combo">
                    <input type="number" max="255" min="1" step="1" value="{{.Amplifier}}" placeholder="1"
                        class="indexed-input" id="potion-amplifier-{{$index}}" data-index="{{$index}}"
                        oninput='updateRangeValue("potion-amplifier-range", this);' />
                    <input type="range" max="255" min="1" step="1" value="{{.Amplifier}}" placeholder="1"
                        class="indexed-input" id="potion-amplifier-range-{{$index}}" data-index="{{$index}}"
                        name="effect[{{$index}}].amplifier" oninput='updateRangeValue("potion-amplifier", this);' />
                </div>
            </div>
            {{end}}
        </form>
        <div class="add-effect"><i class="fas fa-plus fa-3x" onclick='addEffectInput();'></i></div>
    </div>

    <div class="footer">
        <div></div>
        <button id="test-button" class="darker-teal" type="button" onclick='doTestPreset();'>Test (3 seconds)</button>
        <button class="cyan" type="button" onclick='document.getElementById("preset-form").submit();'>Save</button>
        <div class="primary-button">
            <button class="darker-cyan" type="button" onclick='navigate(CP_PRESETS_ENDPOINT);'>Cancel</button>
        </div>
    </div>
</body>

</html>
